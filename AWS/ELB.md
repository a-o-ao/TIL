# ELB

## ELBの主要機能

| 機能名               | 説明                                                                                     |
|--------------------|--------------------------------------------------------------------------------------------|
| ヘルスチェック       | EC2インスタンスの正常／異常を確認し、利用するEC2の振り分けを行う                             |
| クロスゾーン負荷分散 | 配下のEC2の負荷に応じて、複数のAZに跨るEC2インスタンスに均等に負荷分散を行う                 |
| 暗号化通信           | SSL/TSL証明書をELBに設定することでHTTPSまたはTLS通信を実施することができる                   |
| スティッキーセッション | セッション中に同じユーザから来たリクエストを継続して同じEC2インスタンスに送信する               |
| Connection Draining | インスタンスが登録解除されるか異常が発生した場合に、そのバックエンドインスタンスへの新規リクエスト送信を中止する |
| ログ取得             | ELBのログ取得を有効化するとS3バケットにログを収集                                           |


### UnhealthyHostCount

`UnhealthyHostCount` は、AWSのロードバランサー（特にELB: Elastic Load Balancing）で使用されるメトリクスの1つです。<br>
ロードバランサーによって検出された 「非正常（Unhealthy）」なバックエンドインスタンス（ホスト）の数 を示します。

- 主なポイント
  - 監視対象は、ロードバランサーに登録されているすべてのインスタンスです。
  - ヘルスチェックの結果が「非正常」と判定されたインスタンスの数がカウントされます。
  - 監視を通じて異常が検出された場合、トラフィックは他の正常なインスタンスに振り分けられます。
  - CloudWatchメトリクスとして監視でき、アラームを設定することで自動対応も可能です。
  
