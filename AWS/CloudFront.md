# CloudFront

### 署名付きCookiesと署名付きURLの違い

| 特徴                   | 署名付きURL                         | 署名付きCookies                    |
|------------------------|------------------------------------|-------------------------------------|
| **制御対象**           | 個別のファイル（オブジェクト）       | 複数のファイルやサイト全体         |
| **使用シーン**         | 特定のファイルへのアクセス制限     | サイト全体または複数のファイルへのアクセス制限 |
| **制御方法**           | 各URLに署名を付ける →URLが変わってしまう   | クッキーを使用してアクセス制御     |
| **利点**               | 単一のリソースに対する制御が簡単   | 複数のリソースに一度にアクセス可能 |
| **URLの発行方法**     | 各リソースごとに署名付きURLを発行   | 1回の署名で複数リソースを制御      |

#### 使い分け
- 署名付きURL: 一度に1つのリソース（ファイル）へのアクセス制限が必要な場合、例えば、特定の動画や画像を1回だけアクセス可能にしたい時。
- 署名付きCookies: ユーザーが複数のリソース（例えば、複数の動画）をまとめて利用できるように制御したい場合。

### CloudFrontディストリビューションのキャッシュヒット率向上のための設定

1. **キャッシュポリシーの最適化**  
   キャッシュTTLを適切に設定し、コンテンツのキャッシュを管理。

2. **オリジンサーバーの設定**  
   `Cache-Control`ヘッダでキャッシュの有効期限を指定し、バージョン管理でキャッシュを効率的に更新。

3. **クエリパラメータの管理**  
   不要なクエリパラメータを無視して、キャッシュミスを減らす。

4. **ヘッダとクッキーの最適化**  
   不要なヘッダやクッキーを除外し、キャッシュ効率を向上。

5. **コンテンツ圧縮**  
   圧縮コンテンツ（GzipやBrotli）を使用してキャッシュ効率を高める。

6. **インバリデーションの最小化**  
   コンテンツにバージョン番号を追加して、インバリデーションを減らす。

7. **エッジロケーションの活用**  
   最寄りのエッジロケーションからコンテンツを提供して、パフォーマンス向上。

