# Amazon SQS

## キューの詳細設定

| キュータイプ           | 説明                                                    | ユースケース                                             |
|-------------------|-------------------------------------------------------|-------------------------------------------------------|
| **遅延キュー（Delay Queue）**  | メッセージの送信から**指定した遅延時間後**にメッセージがキューに配信される。 | - 何らかの処理を遅らせる必要がある場合<br>- イベントの遅延実行が必要な場合 |
| **優先度付きキュー（Priority Queue）** | SQSには標準的な優先度付きキューの機能はなく、実装には**FIFOキュー**や**カスタム処理**が必要。 | - 高優先度のタスクを優先的に処理する必要がある場合 |
| **デッドレターキュー（DLQ）** | 処理できなかったメッセージを**指定した回数以上**失敗した後に転送するキュー。 | - メッセージの処理失敗を監視し、再処理する必要がある場合<br>- エラーログの収集やトラブルシューティング |

優先付けには次のような設定を行います。

1. SQSを用いて優先順位ごとに複数のキューを用意する。
2. 処理を急ぐリクエストは優先順位の高いキューに入れる。
3. 優先順位に応じてキューを処理するサーバー台数を用意する。
4. キューの「メッセージの遅延送信」機能を利用することで、処理開始時間を遅延させることも可能である。
