# IAM

### EC2 インスタンスにIAMロールをアタッチする方法

- EC2 に IAM ロールを渡すための仕組みが`インスタンスプロファイル`
- IAM ロールを通じてEC2インスタンスが AWS リソースにアクセス可能
- AWS CLI や SDK を使うと、自動的にロールの権限を使用できる
- アクセスキーを使う方法よりも安全！

### IDフェデレーション

外部のIDプロバイダーを通じて認証を行い、AWSリソースへのアクセスを制御する仕組み<br>
これにより、ユーザーは複数のサービスに対してシームレスにアクセスでき、管理者はアクセス権限を一元的に管理できます。

#### 代表的なIDフェデレーションの方法：
- **SAMLフェデレーション** → SAML 2.0に対応したIdP（例: Microsoft Entra ID, Okta）を利用
- **OIDCフェデレーション** → OIDC対応のIdP（例: Google, Amazon Cognito）を利用
- **カスタムフェデレーション** → AWS STS（Security Token Service）を活用して、一時的なアクセス権を発行

## ユーザーベースのポリシータイプ
**IAMポリシーを作成してユーザーなどへのアクセス権限を付与**

### 管理ポリシー
#### 【AWS管理ポリシー】
AWSが作成および管理する管理ポリシー

#### 【カスタマー管理ポリシー】
AWSアカウントで作成・管理する管理ポリシー。  
同じポリシーを複数のIAMエンティティにアタッチできる。

### インラインポリシー
**ユーザーが作成および管理するポリシー**  
1つのプリンシパルエンティティ（ユーザー、グループ、またはロール）に埋め込まれた固有ポリシーで、プリンシパルエンティティにアタッチすることができる。
