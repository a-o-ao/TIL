# ディザスタリカバリ（DR）戦略

- RTO（目標復旧時間）：障害発生からサービスが復旧するまでに許容できる最大ダウンタイム。
- RPO（目標復旧時点）：障害が起きたときに、どの時点のデータまで復旧できれば許容できるかというデータ損失の許容範囲。

### アクティブ/パッシブ・アクティブ/アクティブ構成

- アクティブ/パッシブ構成：通常時は1つの環境だけが本番稼働 （アクティブ）しており、もう一方は待機状態（パッシブ）になっている構成です。待機側のコストやリソース消費を抑えられますが、障害時に待機環境をフル稼働させるまでの操作が必要で、復旧にある程度時間がかかります。該当するDR戦略は、バックアップ＆リストア、パイロットライト、ウォームスタンバイです。
- アクティブ/アクティブ構成：通常から複数の環境が本番稼働しており、トラフィックを分散して処理します。どちらか一方に障害が起きてもすぐに別環境にトラフィックを切り替えられ、ダウンタイムを最小化できますが、常時複数環境を稼働させる分、コストや運用の複雑さが高くなります。該当するDR戦略はマルチサイトです。

## 4つのDR戦略

### バックアップ&リストア

平常時に定期的にバックアップを取得し、災害時に新しいリソースを立ち上げてバックアップデータからリストアする方法

- 復旧の際に新しいリソースを起動してバックアップデータをリストアするため、RTOは数時間程度
- バックアップ取得の頻度によってはデータが失われるリスクがあり、RPOも比較的大きくなりがち
- 4つの戦略の中では最も低コストかつ運用がシンプル

### パイロットライト

重要なコアサービス（データベースなど）は常時稼働させておき、その他のコンポーネント（アプリケーションサーバーなど）は停止状態にしておく戦略

- 障害発生時には、停止していたコンポーネントを起動・スケールアップして本番稼働に切り替え
- RTOは数十分程度

### ウォームスタンバイ

本番より規模を落としたサブ環境を常時起動しておき、障害時にはこのサブ環境をスケールアップして本番規模に近づけ、サービスを切り替える戦略

- サブ環境が既に一通り稼働しているため、フェイルオーバー時の作業は主にスケールアップと切り替えのみで済み、パイロットライトよりさらに短時間での復旧が可能
- RTOは数分程度
- コスト・複雑さは、パイロットライトより高い

### マルチサイト

複数のサイトやリージョンで同時に本番稼働させておき、平常時からトラフィックを分散処理する戦略

- もっともコストが高く運用が複雑
- RTOは最少
- データ損失はほぼゼロ

![image](https://ping-t-resouces.com/uploads/question_image/file/28207/k66667.jpg?t=1744953030)

