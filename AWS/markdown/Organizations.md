# AWS Organizations

## 主な特徴

| 特徴 | 説明 |
|------|------|
| 複数アカウントの一元管理 | 1つの「マスターアカウント（現：管理アカウント）」から複数の AWS アカウントを統合管理できます。 |
| 統合請求（Consolidated Billing） | 複数アカウントの請求をまとめて管理。使用量を合算してボリューム割引を享受できます。 |
| SCP（Service Control Policies）によるアクセス制御 | 組織全体やOU単位で「何を使えるか」のガードレールを設定できます。IAMポリシーとは別の上位制約。 |
| 組織単位（OU）の利用 | アカウントをグループ化（OU: Organizational Unit）してポリシー管理を効率化。 |
| セキュリティベストプラクティスに対応 | アカウント分離（prod/dev/secretsなど）を実現し、セキュリティを向上。 |
| 自動アカウント作成・招待 | APIやCLI、Control Tower などを通じて新しいアカウントの自動管理も可能。 |
| AWS Control Towerと連携可能 | Control Tower を使えば、Organizationsベースでアカウント作成～管理テンプレ化が可能。 |
| タグポリシー | タグポリシーは、リソースの整理やコスト管理を効率化するために使用される。特定のタグキーや値の命名規則を強制し、組織全体で一貫したタグ付けを実現できる。 |
| 条件キー | 条件キーを使用することで、ポリシーの許可や拒否を具体的な条件で細かく制御し、アクセス権を詳細に管理できる。特定の条件に基づいてアクセス制御を行うためにポリシーのCondition要素の中で使用される。 |

![image](https://ping-t-resouces.com/uploads/question_image/file/22959/kkk58571.jpg?t=1716281436)

## SCP
SCP（サービスコントロールポリシー）とは、AWS Organizations 内のアカウントに対してサービスやアクションの使用を制限するポリシーで、IAMポリシーとは異なりアクセス許可を付与することはできない。

AWS OrganizationsにおいてSCPを有効化すると、デフォルトでメンバーアカウントが所属するOUには「FullAWSAccess」が付与される。<br>
特定の権限を制限するSCPを新たにOUに設定する際には、そのSCPをアタッチした後に「FullAWSAccess」をデタッチする必要がある。

### SCP（サービスコントロールポリシー）とIAMポリシーの違い

| 項目                       | **SCP（サービスコントロールポリシー）**                  | **IAMポリシー**                              |
|---------------------------|------------------------------------------------------|--------------------------------------------|
| **適用範囲**               | AWS Organizations内のアカウント、OU（組織単位）全体   | IAMユーザー、IAMロール、IAMグループ          |
| **主な役割**               | サービスやアクションへのアクセス制限（許可ではなく制限） | サービスへのアクセス許可・拒否               |
| **許可の付与**             | できない（制限のみ）                                   | 許可・拒否両方が可能                        |
| **アクセス制御の粒度**     | アカウントやOU単位での制限                            | ユーザーやリソース（S3、EC2など）単位で制御 |
| **適用方法**               | AWSアカウントの管理者権限を持つユーザーに適用される   | IAMエンティティ（ユーザー、ロール、グループ）に適用 |
| **使用例**                 | 特定のサービスやリージョンへのアクセスを制限（例: EC2禁止） | 特定のリソース（例: S3バケット）へのアクセスを許可（例: ReadOnlyアクセス） |
| **適用する場所**           | AWS Organizations                                    | 各AWSアカウントのIAM設定                    |
| **主な機能**               | アカウント間でのアクセス制限と、全体的なセキュリティ管理 | アカウント内でのリソースアクセス権限管理    |

- SCPだけではアクセスを許可できないため、IAMポリシーの設定が必要。
- SCPは組織やアカウント単位の制限をかけるためのもの。
- IAMポリシーは、ユーザーやロールごとにリソースへのアクセス許可を管理するもの。
- 両方を組み合わせて、強力なセキュリティ管理を実現する。

✅ 結論: SCPとIAMポリシーは両方設定する必要がある！

## 一括請求

AWS Organizationsの一括請求機能を利用することで、単一の組織内に存在する複数のAWSアカウントの支払いを一元化することが可能です。Amazon EC2やAmazon S3などの特定のサービスでは、利用量が増えるほど単価が下がるボリュームディスカウントが適用されます。このため、ストレージの使用量を統合して請求することで、コスト削減の可能性が生まれます。

## コスト配分タグ

AWS のリソースごとの使用料をタグベースで分類・分析できる仕組み。

AWS Cost Explorerと連携してタグごとのコストレポートを作成できるので、詳細なコスト分析を行えます。

# AWS Control Tower

AWSにおけるベストプラクティスに基づいた、セキュアなマルチアカウント環境（ランディングゾーンと呼ばれます）のセットアップを自動化するマネージドサービス

### 予防コントロール.....対象の操作を実施できないようにする

特定のアクションやリソースの利用を事前に制限することで、セキュリティポリシーやコンプライアンスに違反する動作を防ぎます。Control TowerがOrganizationsのSCPを利用することで、特定のサービスやAPI操作を組織全体で禁止することができます。

### 検出コントロール.....リソースが作成された後に監視し、違反を検知して通知する

AWSリソースやアクションが実行された後にその内容を監視し、ポリシー違反や異常な動作を検出します。Control TowerがAWS Configルールを利用することで、リソースがコンプライアンスに違反していないかをチェックすることができます。

### プロアクティブコントロール.....CloudFormationでルールに沿ったリソースのみを作成可能にする

CloudFormationでリソースが作成される前に、事前に定義されたポリシーやルールに適合しているかどうかを確認し、違反しているリソースが作成されるのを防ぎます。CloudFormationでプロビジョニングする前にリソースをチェックし、ポリシー違反のリソースを修正またはデプロイを防ぐことができます。

