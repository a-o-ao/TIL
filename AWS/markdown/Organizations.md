# AWS Organizations

## SCP
SCP（サービスコントロールポリシー）とは、AWS Organizations 内のアカウントに対してサービスやアクションの使用を制限するポリシーで、IAMポリシーとは異なりアクセス許可を付与することはできない。

AWS OrganizationsにおいてSCPを有効化すると、デフォルトでメンバーアカウントが所属するOUには「FullAWSAccess」が付与される。<br>
特定の権限を制限するSCPを新たにOUに設定する際には、そのSCPをアタッチした後に「FullAWSAccess」をデタッチする必要がある。

### SCP（サービスコントロールポリシー）とIAMポリシーの違い

| 項目                       | **SCP（サービスコントロールポリシー）**                  | **IAMポリシー**                              |
|---------------------------|------------------------------------------------------|--------------------------------------------|
| **適用範囲**               | AWS Organizations内のアカウント、OU（組織単位）全体   | IAMユーザー、IAMロール、IAMグループ          |
| **主な役割**               | サービスやアクションへのアクセス制限（許可ではなく制限） | サービスへのアクセス許可・拒否               |
| **許可の付与**             | できない（制限のみ）                                   | 許可・拒否両方が可能                        |
| **アクセス制御の粒度**     | アカウントやOU単位での制限                            | ユーザーやリソース（S3、EC2など）単位で制御 |
| **適用方法**               | AWSアカウントの管理者権限を持つユーザーに適用される   | IAMエンティティ（ユーザー、ロール、グループ）に適用 |
| **使用例**                 | 特定のサービスやリージョンへのアクセスを制限（例: EC2禁止） | 特定のリソース（例: S3バケット）へのアクセスを許可（例: ReadOnlyアクセス） |
| **適用する場所**           | AWS Organizations                                    | 各AWSアカウントのIAM設定                    |
| **主な機能**               | アカウント間でのアクセス制限と、全体的なセキュリティ管理 | アカウント内でのリソースアクセス権限管理    |

- SCPだけではアクセスを許可できないため、IAMポリシーの設定が必要。
- SCPは組織やアカウント単位の制限をかけるためのもの。
- IAMポリシーは、ユーザーやロールごとにリソースへのアクセス許可を管理するもの。
- 両方を組み合わせて、強力なセキュリティ管理を実現する。

✅ 結論: SCPとIAMポリシーは両方設定する必要がある！

